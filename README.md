# Boilerplate Firebase Cloud Functions

Implement functions to prevent duplicated effort on both iOS and Android application.

## What's Cloud Functions

Cloud Functions for Firebase is a serverless framework that lets you automatically run backend code in response to events triggered by Firebase features and HTTPS requests. Your JavaScript or TypeScript code is stored in Google's cloud and runs in a managed environment. There's no need to manage and scale your own servers.

## Why's Cloud Functions

|Key capabilities|Description|
|:----|:----|
|Integrates the Firebase platform|The functions you write can respond to events generated by various Firebase and Google Cloud features, from Firebase Authentication triggers to Cloud Storage Triggers. Integrate across Firebase features using the Admin SDK together with Cloud Functions, and integrate with third-party services by writing your own webhooks. Cloud Functions minimizes boilerplate code, making it easier to use Firebase and Google Cloud inside your function.|
|Zero maintenance |	Deploy your JavaScript or TypeScript code to our servers with one command from the command line. After that, Firebase automatically scales up computing resources to match the usage patterns of your users. You never worry about credentials, server configuration, provisioning new servers, or decommissioning old ones.|
|Keeps your logic private and secure |In many cases, developers prefer to control application logic on the server to avoid tampering on the client side. Also, sometimes it's not desirable to allow that code to be reverse engineered. Cloud Functions is fully insulated from the client, so you can be sure it is private and always does exactly what you want.|

## How does it work

After you write and deploy a function, Google's servers begin to manage the function immediately. You can fire the function directly with an HTTP request, or, in the case of background functions, Google's servers will listen for events and run the function when it is triggered.

![Notify users when something interesting happens](https://firebase.google.com/docs/functions/images/notify.png?authuser=1)

As the load increases or decreases, Google responds by rapidly scaling the number of virtual server instances needed to run your function. Each function runs in isolation, in its own environment with its own configuration.

## Pre-requisite

Installed npm which typically comes with NodeJS(8, 10 recommended that required Blaze plan , 12 beta). [Pricing plans](https://firebase.google.com/pricing)

```bash
brew install node
```

To install or upgrade the Firebase CLI (>= 4.0.0)

```bash
npm -g install firebase-tools
```

Authorize the Firebase CLI

```bash
firebase login
```

Select your Project ID and follow the instructions

```bash
firebase use --add
```

## Structure

```bash
.
├── README.md
├── firebase.json
├── firestore.indexes.json
├── firestore.rules
├── functions
│   ├── fcm-notifications
│   ├── index.js
│   ├── node_modules
│   ├── package-lock.json
│   └── package.json
├── scripts
│   └── messages-slack.sh
└── storage.rules
```

## Coding Convention

- Follow [Google JavaScript Style Guide](https://docs.npmjs.com/misc/coding-style.html)
- How to [Organize function](https://firebase.google.com/docs/functions/organize-functions?authuser=1)
- FireStoreApply [Firestore's Best practices](https://cloud.google.com/firestore/docs/best-practices)

## Manage Deployment and runtime options

Deploy all functions inside `index.js`

```bash
firebase deploy --only functions
```

Deploying specific functions to speeds up the deployment process and helps you avoid running into deployment quotas

```bash
firebase deploy --only functions:function1,functions:function2
```

Delete functions [More Detail](https://firebase.google.com/docs/functions/manage-functions?authuser=1#delete_functions)

```bash
# Delete Functions running in default region
firebase functions:delete FUNCTION-1_NAME FUNCTION-2_NAME

# Deletes a specified functions group
firebase functions:delete GROUP_NAME

# Specified function running in a specified region
firebase functions:delete FUNCTION-1_NAME --region REGION_NAME
```

## Verify Functions

- Run functions locally [Firebase's Emulator](https://firebase.google.com/docs/functions/local-emulator)
- Write and view logs [Guide](https://firebase.google.com/docs/functions/writing-and-viewing-logs)